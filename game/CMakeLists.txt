PROJECT(rummigame)

FIND_PACKAGE(Qt4 REQUIRED)

# Set source files
SET(game_QT_FILES_WITHOUT_SUFFIX
  MainWindow
)

SET(game_SOURCES
  Main.cpp
)

FOREACH(game_QT_FILE_WITHOUT_SUFFIX ${game_QT_FILES_WITHOUT_SUFFIX})
  SET(game_SOURCES ${game_SOURCES} ${game_QT_FILE_WITHOUT_SUFFIX}.cpp)
  SET(game_HEADERS ${game_HEADERS} ${game_QT_FILE_WITHOUT_SUFFIX}.h)
  SET(game_FORMS ${game_FORMS} ${game_QT_FILE_WITHOUT_SUFFIX}.ui)
ENDFOREACH(game_QT_FILE_WITHOUT_SUFFIX)

# Using QT
INCLUDE(${QT_USE_FILE})
ADD_DEFINITIONS(${QT_DEFINITIONS})
QT4_WRAP_CPP(game_HEADERS_MOC ${game_HEADERS})
QT4_WRAP_UI(game_FORMS_HEADERS ${game_FORMS})

# This include intermediate files generated by QT
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR})

INCLUDE_DIRECTORIES(${rummicore_SOURCE_DIR}/include)

ADD_EXECUTABLE(${PROJECT_NAME} ${game_SOURCES} ${game_HEADERS_MOC} ${game_FORMS_HEADERS})
TARGET_LINK_LIBRARIES(${PROJECT_NAME} ${QT_LIBRARIES} rummicore)
INSTALL(TARGETS ${PROJECT_NAME}
  RUNTIME DESTINATION bin
)

